/// <reference path="jquery.min.js" />
/// <reference path="sqlitehelper.js" />
/// <reference path="rsseasy.min.js" />

//对话框
var RssDialog = { "wrap": $('<div class="dialogbox"><header><h2></h2><span>×</span></header><main></main><footer><button type="button">确定</button><button type="button">取消</button></footer></footer></div>') }  //弹窗
$("body").append(RssDialog.wrap);
RssDialog.MainWrap = RssDialog.wrap.find("main");
RssDialog.Header = RssDialog.wrap.find("header");
RssDialog.Title = RssDialog.Header.find("h2");
RssDialog.Footer = RssDialog.wrap.find("footer");
RssDialog.Config = RssDialog.Footer.find("button").click(function () {
    RssDialog.Close();
}).first().click(function () {
    RssDialog.onConfig();
});
RssDialog.Header.find("span").click(function () {
    RssDialog.Close();
});
RssDialog.onConfig = function () { }
RssDialog.setConfig = function (txt) {
    RssDialog.Config.text(txt);
    return this;
}
RssDialog.wrap.click(function (ev) {
    ev.stopPropagation();
});
RssDialog.wrap.on("click", "p,dd", function () {
    RssDialog.Close();
});
RssDialog.SetTitle = function (title) {
    this.Title.html(title);
    return this;
}
RssDialog.BindDict = function (dict) {
    var html = "";
    $.each(dict, function (key, val) {
        html += '<dd value="' + key + '">' + val + '</dd>';
    });
    var t = this;
    this.MainWrap.append(html).find("dd").click(function () {
        var _t = $(this);
        t.onSelect({ "key": _t.attr("value"), "value": _t.text() });
    });
    this.ReSize();
    return this;
}
RssDialog.AddHtml = function (html) {
    var t = this;
    this.MainWrap.html(html);
    this.ReSize();
    this.onAddHtml();
    return this;
}
RssDialog.onAddHtml = function () {

}
RssDialog.ReSize = function () {
    var h = this.wrap.outerHeight();
}
RssDialog.Popup = function (claname) {
    RssWin.MaskLayer.show();
    RssDialog.wrap.addClass(claname).fadeIn(200)
    return this;
}
RssDialog.Close = function () {
    RssDialog.wrap.fadeOut(100, function () {
        RssWin.MaskLayer.close();
        RssDialog.wrap.removeClass();
        RssDialog.wrap.addClass("dialogbox");
    })
    return this;
}
RssDialog.onSelect = function (json) {
}