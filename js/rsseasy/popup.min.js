/// <reference path="jquery.min.js" />
/// <reference path="sqlitehelper.js" />
/// <reference path="rsseasy.min.js" />

//从底部弹框
var RssPopup = { "wrap": $('<div class="choosepopup"><main><header></header><ul></ul></main><p>取消</p></div>') }  //弹窗
$("body").append(RssPopup.wrap);
RssPopup.ItemWrap = RssPopup.wrap.find("ul");
RssPopup.Title = RssPopup.wrap.find("header");
RssPopup.wrap.click(function (ev) {
    ev.stopPropagation();
});
RssPopup.wrap.on("click", "p,li", function () {
    RssPopup.Close();
});
RssPopup.SetTitle = function (title) {
    this.Title.html(title);
    return this;
}
RssPopup.BindDict = function (dict) {
    var html = "";
    $.each(dict, function (key, val) {
        html += '<li value="' + key + '">' + val + '</li>';
    });
    var t = this;
    this.ItemWrap.html(html).find("li").click(function () {
        var _t = $(this);
        t.onSelect({ "key": _t.attr("value"), "value": _t.text() });
    });
    this.ReSize();
    return this;
}
RssPopup.AddHtml = function (html) {
    var t = this;
    this.ItemWrap.html(html).find("li").click(function (ev) {
        var _t = $(this);
        t.onSelect({ "key": _t.attr("key") || "", "value": _t.text() });
    });
    this.ReSize();
    return this;
}
RssPopup.ReSize = function () {
    var h = this.wrap.outerHeight();
    this.wrap.css("bottom", -h);
}
RssPopup.Popup = function () {
    RssWin.MaskLayer.show();
    this.wrap.addClass("popup");
    return this;
}
RssPopup.Close = function () {
    this.wrap.removeClass("popup");
    setTimeout(function () {
        RssWin.MaskLayer.close();
    }, 150);
    return this;
}
RssPopup.onSelect = function (json) {
}